# Second Brain Chatbot Web Component

A customizable chatbot web component built with React, TypeScript, and Vite.

## Installation

This project is designed to be used as a web component.

### Building the Project

To build the web component:

```bash
npm run build
# or
pnpm run build
```

This will:
1. Generate files in the `dist` directory (`secondBrainChatBot.js` and `secondBrainChatBot.css`)
2. Automatically copy the `dist` folder to `consumer-app/dist` for testing

## Usage

### In a HTML file

1. Include the script and stylesheet in your HTML file:

```html
<script type="module" src="./dist/secondBrainChatBot.js"></script>
<link rel="stylesheet" href="./dist/secondBrainChatBot.css">
```

2. Use the custom element:

```html
<second-brain-chatbot
  enterprise-token="YOUR_ENTERPRISE_TOKEN"
  user-token="YOUR_USER_TOKEN"
  member-id="YOUR_MEMBER_ID"
  base_api="YOUR_BASE_API_URL"
></second-brain-chatbot>
```

### Attributes

| Attribute          | Description                                      | Required |
| ------------------ | ------------------------------------------------ | :------: |
| `enterprise-token` | The enterprise token for authentication.         |   Yes    |
| `user-token`       | The user token for authentication.               |   Yes    |
| `member-id`        | The member ID associated with the user.          |   Yes    |
| `base_api`         | The base URL for the API (e.g., `https://.../`). |   Yes    |

## Development

### Prerequisites

- Node.js (v18+)
- pnpm (recommended) or npm

### Setup

```bash
pnpm install
```

### Running Locally

To start the development server:

```bash
pnpm run dev
```

### Linting and Formatting

To run linting:

```bash
pnpm run lint
# or fix automatically
pnpm run lint:fix
```

To format code:

```bash
pnpm run format
```

### Testing the Build

To test the built web component using the included consumer app:

1. Build the project (this copies the dist to consumer-app):
```bash
pnpm run build
```

2. Start the consumer app server:
```bash
pnpm run start:consumer
```

3. Open `http://localhost:3000` in your browser

The consumer app is located in the `consumer-app/` directory and runs independently with its own server.

## Project Structure

- `src/`: Source code
  - `components/`: React components
    - `chat/`: Chat UI sub-components
  - `hooks/`: Custom React hooks
  - `store/`: Zustand stores
  - `api-manager.ts`: API handling logic
  - `WebCompo.tsx`: Web Component wrapper
- `dist/`: Built artifacts (generated by build)
- `consumer-app/`: Independent test app
  - `dist/`: Copy of built artifacts (auto-generated)
  - `index.html`: Test page
  - `package.json`: Consumer app dependencies
